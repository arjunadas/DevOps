# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç: Docker Compose Best Practices

> –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `docker-compose` –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö (dev –∏ production).

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- [ ] –£–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã `version: "3.8"` –∏–ª–∏ –Ω–æ–≤–µ–µ
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
  - `docker-compose.yml` (–æ—Å–Ω–æ–≤–∞)
  - `docker-compose.override.yml` (dev)
  - `docker-compose.prod.yml` (prod)
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `.env`
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–º–µ–Ω–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Å–µ—Ç–µ–π (`container_name`, `networks`)
- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–∞—Ä–æ–ª–µ–π, –ø–æ—Ä—Ç–æ–≤ –∏ –ø—É—Ç–µ–π –≤ YAML

---

## üîÑ –û–±—Ä–∞–∑—ã –∏ —Å–±–æ—Ä–∫–∞

- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ–≥–∏ –æ–±—Ä–∞–∑–æ–≤ (`postgres:14.3` –≤–º–µ—Å—Ç–æ `latest`)
- [ ] –í dev –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `build:`, –≤ prod ‚Äî `image:`
- [ ] Dockerfile –Ω–∞–ø–∏—Å–∞–Ω —Å —É—á—ë—Ç–æ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤
- [ ] –£–¥–∞–ª—è—é—Ç—Å—è –ª–∏—à–Ω–∏–µ –ø–∞–∫–µ—Ç—ã –∏ –∫–µ—à –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `.dockerignore` —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–∏—à–Ω–µ–≥–æ

---

## üîß –°–µ—Ä–≤–∏—Å—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–±–∏—Ç–æ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (app, db, cache, nginx –∏ —Ç.–¥.)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `depends_on` –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å `healthcheck`
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–º–∞ (`volumes:`) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- [ ] –ü–æ—Ä—Ç—ã (`ports:`) –ø—Ä–æ–±—Ä–æ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –£–∫–∞–∑–∞–Ω–∞ —Å–µ—Ç—å –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å–µ—Ç—å (`networks:`)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏)
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ Docker Secrets, Vault –∏–ª–∏ CI/CD
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–¥ root (`user: "1000:1000"`)
- [ ] –ù–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`/etc`, `/root`, –∏ —Ç.–ø.)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ –ø–æ—Ä—Ç–∞–º (–Ω–µ `0.0.0.0` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## üß™ –°—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- [ ] –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è `volumes:` –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (–≥–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `command:` –∏–ª–∏ `entrypoint:` –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ dev
- [ ] –°—Ä–µ–¥–∞ dev –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- [ ] –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ Makefile, npm/yarn scripts –∏ —Ç.–ø.

---

## üßπ –†–µ—Å—É—Ä—Å—ã –∏ –ª–æ–≥–∏

- [ ] –£–∫–∞–∑–∞–Ω—ã –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤:
  ```yaml
  deploy:
    resources:
      limits:
        cpus: "0.50"
        memory: "512M"
  ```
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  ```yaml
  logging:
    driver: "json-file"
    options:
      max-size: "10m"
      max-file: "3"
  ```
- [ ] –î–∞–Ω–Ω—ã–µ –±–∞–∑ –∏ –∫—ç—à–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–æ–º–∞—Ö, –Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- [ ] –õ–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) —á–µ—Ä–µ–∑ Prometheus, Grafana, Loki –∏ —Ç.–¥.

---

## ‚öô –ü—Ä–æ–¥–∞–∫—à–µ–Ω

- [ ] –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π `docker-compose.prod.yml`
- [ ] –ü—Ä–æ–¥-–æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ CI/CD, –±–µ–∑ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –û—Ç–∫—Ä—ã—Ç—ã —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã –∏ —Ä–µ—Å—Ç–∞—Ä—Ç—ã
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è reverse proxy (nginx, traefik) –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø—Ä–∏–º–µ—Ä)

```
/project-root
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ docker-compose.override.yml
‚îú‚îÄ‚îÄ docker-compose.prod.yml
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .dockerignore
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ /app
‚îú‚îÄ‚îÄ /nginx
‚îú‚îÄ‚îÄ /db
‚îî‚îÄ‚îÄ README.md
```

---

## üß© –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω CI/CD pipeline –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è
- [ ] –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (`docker-compose config`)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `docker-compose down -v` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ä–µ–¥—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –≤ `README.md`

---

üîí –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö ‚Äî `docker-compose` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Ç–∞–µ–º—ã–º, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º –∏ –Ω–∞–¥—ë–∂–Ω—ã–º –∫–∞–∫ –≤ dev, —Ç–∞–∫ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
