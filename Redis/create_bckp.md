‚úÖ –ß—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ Redis —á–µ—Ä–µ–∑ AOF 2.0, —Ç–µ–±–µ –Ω—É–∂–Ω—ã –≤—Å–µ —Ç—Ä–∏ —Ñ–∞–π–ª–∞:

–ö–æ–ø–∏—Ä—É–π –∏—Ö –≤ —Ç—É –∂–µ –ø–∞–ø–∫—É –Ω–∞ –≤—Ç–æ—Ä–æ–π –º–∞—à–∏–Ω–µ:
```
cp /opt/redis/data/appendonlydir/* /opt/redis2/data2/
```

üî• –ó–∞–ø—É—Å–∫

    –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```
docker rm -f redis-2
```
    –°–∫–æ–ø–∏—Ä—É–π –ø–∞–ø–∫—É:
```
cp -r /opt/redis/data/appendonlydir /opt/redis2/data2/
```
    –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ docker-compose2.yml:
```
volumes:
  - /opt/redis2/data2:/data
command: redis-server --appendonly yes
```
    –ó–∞–ø—É—Å—Ç–∏ –≤—Ç–æ—Ä–æ–π Redis:
```
docker-compose -f /opt/redis2/docker-compose2.yml up -d
```
    –£–±–µ–¥–∏—Å—å, —á—Ç–æ Redis –∑–∞–≥—Ä—É–∑–∏–ª –¥–∞–Ω–Ω—ã–µ:
```
redis-cli -p 6380 KEYS "*"
```


–≤–æ—Ç –∫–æ—Ä–æ—Ç–∫–∞—è –ø–∞–º—è—Ç–∫–∞:
üìù –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –ø–µ—Ä–µ–Ω–æ—Å—É Redis —á–µ—Ä–µ–∑ AOF 2.0:

    –£–±–µ–¥–∏—Å—å, —á—Ç–æ Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç appendonly yes

    –ó–∞–ø—É—Å—Ç–∏ BGREWRITEAOF (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
    
```
–ß—Ç–æ –¥–µ–ª–∞–µ—Ç BGREWRITEAOF?
1    –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π AOF-—Ñ–∞–π–ª —Å –Ω—É–ª—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É—è —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã.
2    –ó–∞–º–µ–Ω—è–µ—Ç –¥–ª–∏–Ω–Ω—ã–π –∂—É—Ä–Ω–∞–ª –∫–æ–º–∞–Ω–¥ (–∫–æ—Ç–æ—Ä—ã–π Redis –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –≤ appendonly.aof) –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–π, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.
3    –î–µ–ª–∞–µ—Ç —ç—Ç–æ –≤ —Ñ–æ–Ω–µ (BG = background), –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å Redis.
```

    –°–∫–æ–ø–∏—Ä—É–π –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ appenddirname ‚Äî –≤–∫–ª—é—á–∞—è –º–∞–Ω–∏—Ñ–µ—Å—Ç

    –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ appenddirname —Å–æ–≤–ø–∞–¥–∞–µ—Ç –≤ –∫–æ–Ω—Ñ–∏–≥–µ –Ω–æ–≤–æ–≥–æ Redis

    –£–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Å—è, —á—Ç–æ –ø—Ä–∞–≤–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ–∑–≤–æ–ª—è—é—Ç —á—Ç–µ–Ω–∏–µ Redis-–ø—Ä–æ—Ü–µ—Å—Å—É

    –ó–∞–ø—É—Å—Ç–∏ Redis ‚Äî –æ–Ω —Å–∞–º —Å–æ–±–µ—Ä—ë—Ç –±–∞–∑—É –ø–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç—É
